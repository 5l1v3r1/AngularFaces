<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:prime="http://primefaces.org/ui"
	xmlns:ac="http://beyondjava.net/angularFacesCore">
	<h:head>
		<meta charset="utf-8"></meta>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"></meta>
		<meta name="viewport" content="width=device-width"></meta>
		<title>AngularFaces 2.0 car dealer</title>
		<link rel="stylesheet" href="css/bootstrap.min.css"></link>
		<link rel="stylesheet" href="css/bootstrap-theme.min.css"></link>
		<style type="text/css">
.header {
	background-color: #ccc;
}

.ui-panelgrid-cell { border-width: 0px !important;}

.ui-panelgrid tr  { border-width: 0px !important;}

.carFilterButton {
	background-color: #ff7400;
	float: right;
	border-color: #ff7400;
	border-radius: 5px
}
.header-branding {
	color: #FEE;
}

.ui-messages-error { padding-top:0px; padding-bottom:0px;
                     margin-top:0px;margin-bottom:0px;
                     background-color: #ffffff;
                     border: 0px;
                     }
                     
.ui-panelgrid-cell:nth-child(1) {width:170px}                     
</style>
	</h:head>
	<h:body ng-app="CarShop" ng-controller="CarShopController"
		angularJSFile="details.js" id="angular" style="padding-left:10px">
		<div id="wrapper">
			<header class="header header-fixed">
				<section class="navbar navbar-inverse docs-navbar-primary">
					<div class="container">
						<div class="row">
							<div class="col-md-2"></div>
							<div class="col-md-8 header-branding">
								<h2>
									<translate value="Welcome to the AngularFaces 2.0 car dealer!" />
								</h2>
								<i18n value="Europe's most angular car dealer..." />
							</div>
							<div class="col-md-2"></div>
							
						</div>
					</div>
				</section>
			</header>
		</div>
		<section role="main" class="container main-body">
			<div class="main-grid main-body-grid">
				<div class="col-md-8">
					<form id="myForm">
						<ngsync direction="serverToClient" value="{{customerBean.showDetails}}" />
						<prime:panel header="If you want to buy this car..." ng-show="{{doShowDetails()}}" styleClass="{{showDetailsClass()}}">
							<prime:panelGrid columns="3" style="border: 0px;">
								<prime:inputText value="#{carBean.brand}" />
								<prime:inputText value="#{carBean.type}" />
								<prime:inputText value="#{carBean.price}" />
								<prime:inputText value="#{carBean.mileage}" />
								<prime:inputText value="#{carBean.color}" />
								<prime:inputText value="#{carBean.year}" />
								<prime:inputText value="#{carBean.fuel}" />
							</prime:panelGrid>
						</prime:panel>
						<prime:panel header="... we need some informations about where to deliver it:" ng-show="{{doShowDetails()}}" styleClass="{{showDetailsClass()}}">
							<prime:panelGrid columns="3" style="border: 0px;">
								<prime:inputText value="{{customerBean.lastName}}" />
								<prime:inputText value="{{customerBean.firstName}}" />
								<prime:inputText value="{{customerBean.dateOfBirth}}" />
								<prime:inputText value="{{customerBean.emailAddress}}" />
								<prime:inputText value="{{customerBean.iAgreeToTheTermsAndConditions}}" />
						</prime:panelGrid>		
						</prime:panel>
						<prime:panel header="Please confirm you are a human by answering this simple question:" ng-show="{{doShowDetails()}}" styleClass="{{showDetailsClass()}}">
							<prime:panelGrid columns="3" style="border: 0px;">
								<prime:outputLabel for="captchaField" value="{{customerBean.captchaQuestion}}" />
								<prime:inputText id="captchaField" value="{{customerBean.captcha}}" />
							</prime:panelGrid>
						</prime:panel>
						<prime:commandButton class="carFilterButton" action="#{customerBean.buy(carBean)}" value="Buy this car! (Non-AJAX)" ajax="false" styleClass="{{showDetailsClass()}}" />
						<prime:commandButton class="carFilterButton" action="#{customerBean.buy(carBean)}" value="Buy this car! (JSF AJAX)" update="@form" styleClass="{{showDetailsClass()}}" />
						<prime:commandButton class="carFilterButton" action="#{customerBean.buy(carBean)}" value="Buy this car! (AF AJAX)" update=":angular" styleClass="{{showDetailsClass()}}" />
						
			
						<prime:messages globalOnly="false" />
						<prime:spacer height="200px"></prime:spacer>
					</form>
				</div>
				<div class="col-md-4">
				<h3>What do you see here?</h3>
				<p>This page integrates a PrimeFaces form with AngularFaces.</p>
				<p>The car data are traditional PrimeFaces input fields with JSF EL expressions.</p>
				<p>The customer data fields are PrimeFaces input fields with AngularJS mustaches.</p>
				<p>The CAPTCHA - which is generated on the server - is used to lock or unlock the button with a little AngularJS code.</p>
				<p>The button is a PrimeFaces AJAX CommandButton.</p>
				<p>After hidden one of the buttons the input fields are hidden by means of AngularJS. For some reason ng-show does not work.
				By forcing it to call a Javascript function the value of ng-show is updated to false, but the displayed panel
				doesn't vanish. However, style="{ {showDetailsClass()} }" is more reliable.
				</p>
				  
				</div>
			</div>
		</section>

		<footer class="footer"
			style="position: fixed; bottom: 0px; width: 100%; background-color: #000; padding: 10px; color: #aaa">
			<span class="col-md-2"></span>
			<span class="col-md-8"><p style="margin-bottom:5px"><translate value="Legal notes:" /> 
			</p>
			<p style="margin-bottom:0px"><translate value="(C) Stephan Rauh 2014, http://www.beyondjava.net" /></p>
			<p style="margin-bottom:0px"><translate value="The page runs on AngularFaces 2.1." /></p> 
			<p><translate value="The tab element is an adapted version of the one described
					at http://blog.hfarazm.com/tabs-in-angularjs/" />
			</p></span>
			<span class="col-md-2"></span>
		</footer>
		
	</h:body>
</f:view>
