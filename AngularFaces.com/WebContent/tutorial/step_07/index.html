<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="Description"
	content="AngularFaces brings AngularJS to the JSF world">
<title>AngularFaces Tutorial - Datatables</title>
	<link rel="stylesheet" href="../../bootstrap.min.css" type="text/css">
	<script type="text/javascript" src="../../syntaxhighlighter/shCore.js"></script>
	<script type="text/javascript" src="../../syntaxhighlighter/shBrushJScript.js"></script>
	<script type="text/javascript" src="../../syntaxhighlighter/shBrushXml.js"></script>
	<script type="text/javascript" src="../../syntaxhighlighter/shBrushJava.js"></script>
	<script type="text/javascript" src="../../syntaxhighlighter/shBrushBat.js"></script>
	<link type="text/css" rel="stylesheet" href="../../syntaxhighlighter/shCoreDefault.css"/>
	<script type="text/javascript">SyntaxHighlighter.all();</script>
</head>
<body>
	<div id="wrapper">
		<header class="header header-fixed">
			<section class="navbar navbar-inverse docs-navbar-primary">
				<div class="container">
					<div class="row">
						<div class="col-md-9 header-branding">
							<ul class="nav navbar-nav">
								<li class="divider-vertical"></li>
								<li class="dropdown"><a
									href="http://angularfaces.com">What is
										AngularFaces? </a></li>
								<li class="dropdown"><a
									href="http://www.angularfaces.com/tutorial">Tutorial </a></li>
								<li class="divider-vertical"></li>
								<li><a href="http://www.beyondjava.net"><i
										class="icon-home icon-white"></i>http://BeyondJava.net</a></li>
							</ul>
						</div>
					</div>
				</div>
			</section>
		</header>
	</div>


	<section role="main" class="container main-body">
		<div class="main-grid main-body-grid">
			<div class="col-md-3">
				<div class="side-navigation">
					<ul class="nav-list naked-list">
						<li class="nav-index-group"><a
							href="/tutorial/index.html"
							class="nav-index-group-heading active">Tutorial</a>
							<ul class="aside-nav">
								<li class="nav-index-listing active"><a tabindex="2"
									href="/tutorial/step_00/index.html">0 - Bootstrapping</a></li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_01/index.html" >1 - Labels and messages</a>
								</li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_02/index.html" >2 - Foreign language support</a>
								</li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_03/index.html" >3 - Angular input fields</a>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_04/index.html" >4 - Using mustaches in JSF attributes</a>
								</li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_05/index.html" >5 - Client side bean validation (JSR 303)</a>
								</li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_06/index.html" >6 - Prime:datatable vs. ngtable</a>
								</li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_07/index.html" >7 - The AngularFaces way of AJAX</a>
								</li>
								<li class="nav-index-listing active">
									<a href="/tutorial/step_08/index.html" >8 - ng* pass-through attributes</a>
								</li>
							</ul></li>
					</ul>
				</div>
			</div>
			<div class="col-md-9">
				<div>
					<h1>The AngularFaces way of doing AJAX</h1>
					<p>Most of the time AngularFaces replaces the original AJAX requests by highly-optimized requests of its own.</p>
					<p>Synchronizing values between AngularJS scope and JSF beans works in both ways. The values of the input fields are transmitted back to the
					server, no matter whether you do a regular HTML request, a JSF AJAX request or the optimized AngularFaces request.</p>
					<p>AngularFaces provides an advanced way of AJAX requests. Typically, they use a lot less network bandwidth, and they are faster than traditional
					JSF AJAX request. To activate an AngularFaces AJAX, you have to do two simple preparations:
					<ul>
					<li>Add an JSF AJAX button that includes a special update region: "angular". You've already seen this above: 
										<script type="syntaxhighlighter" class="brush: xml"><![CDATA[
	<prime:commandButton value="save" update="angular" action="#{customer.save}" />]]></script>
					</li>
					<li>Add the id "angular" to the &lt;h:body&gt;.
					<script type="syntaxhighlighter" class="brush: xml"><![CDATA[
	<h:body ng-app="AngularFacesExamples" ng-controller="MyCtrl" id="angular">]]></script>
					</li>
					</ul>
					</p>
					<p>
					Note that the id "angular" doesn't really mark an ordinary update region. It's a virtual id. If AngularFaces sees the idea, it replaces the default
					update response generated by JSF by a highly-optimized response that updates only the scope values. However, there are also drawbacks to this approach.
					For instance, the &lt;h:messages&gt; tag isn't updated. Nor is &lt;prime:growl&gt;. I don't consider this a disadvantage: the idea of AngularFaces
					is to move such functionality to the client. Validation and presenting error messages in particular is Angular's job.
					</p>
										
					<h3>Beware of rendered="false"</h3>
					<p>
					It's a bad idea to use rendered="false" to hide a component in an AngularFaces page. AngularFaces uses optimized AJAX responses that update the 
					variables of the scope, but nothing else. Hence, if you show or hide something on the server side using the rendered attribute, the 
					HTML page is never updated. Better use ng-show, ng-hide or - as shown above - either style or styleClasses. 
					</p>
					
					<h3>Under the hood</h3>
					This is an example of an AngularFaces AJAX response:

					<script type="syntaxhighlighter" class="brush: xml"><![CDATA[
					<?xml version='1.0' encoding='UTF-8'?>
					<partial-response id="j_id1">
					  <changes>
					    <eval><![CDATA[
					       injectJSonIntoScope("calculatorBean",'{"result":107,
					                                              "randomNumberFromServer":50,
					                                              "number1":42,
					                                              "serverSideResult":107,
					                                              "number2":65}
					                                              ,window.jsfScope);
					    ]]></eval>
					    <update id="j_id1:javax.faces.ViewState:0"><![CDATA[...]]>
					    </update>
					  </changes>
			        </partial-response>
					    ]]></script>
					Basically, the response consists of a single Javascript function that's send to the client. By contrast, a traditional JSF response replaces a part
					of the DOM tree. I've omitted a lot of the code in the following example, but you still can easily spot the difference:
					<script type="syntaxhighlighter" class="brush: xml"><![CDATA[
<?xml version='1.0' encoding='UTF-8'?>
<partial-response id="j_id1">
  <changes>
	<update id="myForm">

<form id="myForm" name="myForm" method="post"
	action="/angularfaces-examples/manual/1_getting_started/primefaces.jsf"
	enctype="application/x-www-form-urlencoded">
	<input type="hidden" name="myForm" value="myForm" />

	<h2>Welcome to AngularFaces 2.0!</h2>
	Based firmly in the future...
	<div id="myForm:j_idt3" class="ui-panel ui-widget ui-widget-content ui-corner-all"
		data-widget="widget_myForm_j_idt3">
		<div id="myForm:j_idt3_header"
			class="ui-panel-titlebar ui-widget-header ui-helper-clearfix ui-corner-all">
			<span class="ui-panel-title">This is a JSF view enriched by an AngularJS bean</span>
		</div>
		<div id="myForm:j_idt3_content" class="ui-panel-content ui-widget-content">
			<table id="myForm:j_idt4" class="ui-panelgrid ui-widget" role="grid">
				<tbody>
					<tr class="ui-widget-content" role="row">
						<td role="gridcell" class="ui-panelgrid-cell">
							<label id="myForm:j_id8" class="ui-outputlabel ui-widget"
								for="myForm:j_idt5">
								<span class="ui-outputlabel-rfi">*</span>
							</label>
						</td>
						<td role="gridcell" class="ui-panelgrid-cell">
							<input id="myForm:j_idt5" name="myForm:j_idt5" type="number"
								value="42" min="7" ng-model="calculatorBean.number1" max="50"
								required=""
								class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all"
								data-p-label="" data-p-con="javax.faces.Integer"
								data-p-maxvalue="50" data-p-minvalue="7" data-p-required="true"
								data-p-val="NotNull,Min,Max" />
							<script id="myForm:j_idt5_s" type="text/javascript">
								PrimeFaces.cw("InputText", "widget_myForm_j_idt5", {
								id : "myForm:j_idt5",
								widgetVar : "widget_myForm_j_idt5"
								});
							< /script>
						</td>
						<td role="gridcell" class="ui-panelgrid-cell">
							<angularfacesmessage af-for="myForm:j_idt5"></angularfacesmessage>
						</td>
					</tr>
					...
				</tbody>
			</table>
			<div id="myForm:j_idt13" class="ui-messages ui-widget" aria-live="polite"
				data-summary="data-summary" data-severity="all,error">
				<div class="ui-messages-info ui-corner-all">
					<span class="ui-messages-info-icon"></span>
					<ul>
						<li>
							<span class="ui-messages-info-summary">Last calculation on the server side: 42+65=107</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<script id="myForm:j_idt3_s" type="text/javascript">
		PrimeFaces.cw("Panel", "widget_myForm_j_idt3", {
		id : "myForm:j_idt3",
		widgetVar : "widget_myForm_j_idt3"
		});
	< /script>
	...
</form>
    </update>
    <update id="j_id1:javax.faces.ViewState:0"><![CDATA[...]]>
    </update>
  </changes>
</partial-response>]]></script>
					    

<br />
<br />
<br />

				</div>
			</div>
		</div>
	</section>

	<footer class="footer"
		style="position: fixed; bottom: 0px; width: 100%; background-color: #000; padding: 10px; color: #777">
		<span class="col-md-2"></span> <span class="col-md-4"> (C) 2014
			by Stephan Rauh (<a href="http://www.beyondjava.net">http://www.beyondjava.net</a>).
		</span> 
		<span class="col-md-4"> Page design inspired by <a target="#"
			href="https://angularjs.org/">https://angularjs.org/</a>.
		</span>
		<span class="col-md-2">Legal notes:
		<a target="#"
			href="http://www.angularfaces.com/tutorial/legal/disclaimer.html">disclaimer</a> and 
		<a target="#"
			href="http://www.angularfaces.com/tutorial/legal/impressum.html">impressum</a>.
		</span>
		
	</footer>
	</div>


</body>
</html>