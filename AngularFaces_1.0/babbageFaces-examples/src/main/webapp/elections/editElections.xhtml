<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:prime="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<body>
	<ui:composition>
		<h:form>
			<h:messages />
			<h3>Select a country to edit an election</h3>
			<prime:panel id="selectPartyPanelID">
				<prime:outputLabel value="Country:" for="@next" />
				<prime:selectOneMenu
					value="#{electionEditorController.selectedCountry}"
					converter="CountryConverter">
					<f:selectItem itemLabel="" itemValue="#{null}" />
					<f:selectItems value="#{electionEditorController.countries}"
						var="country" itemLabel="#{country.name}" itemValue="#{country}" />
					<prime:ajax listener="#{electionEditorController.selectCountry()}"
						update="@all" />
				</prime:selectOneMenu>
			</prime:panel>
			<prime:panel
				rendered="#{electionEditorController.selectedCountry!=null}">
				<prime:dataTable
					value="#{electionEditorController.selectedCountry.elections}"
					var="election"
					style="width:300px #{electionEditorController.electionTableVisible()}">
					<prime:column headerText="year">
		              #{election.year}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(0).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=1}">
		              #{election.results.get(0)}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(1).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=2}">
		              #{election.results.get(1)}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(2).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=3}">
		              #{election.results.get(2)}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(3).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=4}">
		              #{election.results.get(3)}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(4).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=5}">
		              #{election.results.get(4)}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(5).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=6}">
		              #{election.results.get(5)}
        		    </prime:column>
					<prime:column headerText="#{electionEditorController.selectedCountry.parties.get(6).name}" rendered="#{electionEditorController.selectedCountry.parties.size()>=7}">
		              #{election.results.get(6)}
        		    </prime:column>
					<prime:column>
						<prime:commandButton value="edit" icon="ui-icon-pencil"
							actionListener="#{electionEditorController.editElection(election)}"
							update="@all" />
					</prime:column>
				</prime:dataTable>
			</prime:panel>

		</h:form>
	</ui:composition>
</body>
</html>