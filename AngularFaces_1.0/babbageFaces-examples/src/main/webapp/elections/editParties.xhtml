<html xmlns="http://www.w3c.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:prime="http://primefaces.org/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets"
>
<body>
  <ui:composition>
    <h:form>
      <h:messages />
      <h3>Select a country to edit the parties.</h3>
      Granted, the user experience of this example could be better. It's optimized in that it does a lot of partial page updates, thereby showing the effect of BabbageFaces.
      
      <prime:panelGrid columns="2">
        <prime:panel id="selectPartyPanelID">
          <prime:outputLabel value="Country:" for="@next" />
          <prime:selectOneMenu value="#{partyEditorController.selectedCountry}" converter="CountryConverter">
            <f:selectItem itemLabel="" itemValue="#{null}" />
            <f:selectItems value="#{partyEditorController.countries}" var="country" itemLabel="#{country.name}"
              itemValue="#{country}"
            />
            <prime:ajax listener="#{partyEditorController.selectCountry()}" update="@all" />
          </prime:selectOneMenu>
          <prime:dataTable value="#{partyEditorController.parties}" var="party"
            style="width:300px #{partyEditorController.partyTableVisible()}"
          >
            <prime:column headerText="Party">
              #{party.name}
            </prime:column>
            <prime:column>
              <prime:commandButton value="edit" icon="ui-icon-pencil"
                actionListener="#{partyEditorController.editParty(party)}" update="@all"
              />
            </prime:column>
          </prime:dataTable>
        </prime:panel>
        <prime:panel id="editPartyPanelID" rendered="#{partyEditorController.selectedParty!=null}">
          <prime:panelGrid columns="2">
            <prime:outputLabel value="Name:" for="@next" />
            <prime:inputText value="#{partyEditorController.selectedParty.name}" />
            <prime:outputLabel value="Year of establishment:" for="@next" />
            <prime:inputText value="#{partyEditorController.selectedParty.yearOfEstablishment}" />
            <prime:outputLabel value="Color:" for="@next" />
            <prime:inputText value="#{partyEditorController.selectedParty.color}" />
          </prime:panelGrid>
        </prime:panel>
        <prime:panel style="display:none" id="editPartyPanel2ID" rendered="#{partyEditorController.selectedParty==null}">
        </prime:panel>
        
      </prime:panelGrid>
    </h:form>
  </ui:composition>
</body>
</html>